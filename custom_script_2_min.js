function g(n) { return document.getElementById(n) } function send(n, e, t) { const o = new XMLHttpRequest; o.open("GET", n), o.timeout = e, o.onreadystatechange = function (n) { 4 === o.readyState && 200 === o.status && t(o.responseText) }, o.send() } function c(n) { g("s").value = n.innerText || n.textContent, g("p").focus() } window.onload = function () { function n() { send("/states", 500, (function (n) { var e = JSON.parse(n); Object.keys(e).forEach((function (n) { g(n) && (g(n).innerHTML = e[n]) })) })), parseInt(g("elapsed").textContent) < 4 && (clearInterval(e), alert("Ватериус выключился. Начните настройку заново, зажав кнопку на 5–10 секунд.")) } n(); var e = setInterval(n, 2e3); function t() { send("/networks", 7e3, (function (n) { g("networks").innerHTML = "<h3>Выберите свою Wi-Fi сеть</h3>".concat(n), clearInterval(o) })) } t(); var o = setInterval(t, 8e3) };